{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _templateObject2,\n    _this = this,\n    _jsxFileName = \"/Users/mdabdurrahman/Desktop/Mobile App/MOBILE APPLICATION PROJECT/PROJECT/P/src/features/settings/screens/CameraScreen.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useRef, useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Camera } from 'expo-camera';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport styled from 'styled-components/native';\nimport { CustomText as Text } from \"../../../components/CustomText/CustomText\";\nimport { AuthenticationContext } from \"../../../services/authentication/AuthenticationContext\";\nvar ProfileCamera = styled(Camera)(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  flex: 1;\\n\"])));\nvar InnerSnap = styled(View)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  z-index: 999;\\n\"])));\nexport var CameraScreen = function CameraScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthenticationContext),\n      user = _useContext.user;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var cameraRef = useRef();\n\n  var snap = function snap() {\n    var photo;\n    return _regeneratorRuntime.async(function snap$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!cameraRef) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync());\n\n          case 3:\n            photo = _context.sent;\n            AsyncStorage.setItem(user.uid + \"-photo\", photo.uri);\n            navigation.goBack();\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context2.sent;\n              status = _await$Camera$request.status;\n              setHasPermission(status === 'granted');\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (hasPermission === null) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (hasPermission === false) {\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 12\n      }\n    }, \"No access to camera\");\n  }\n\n  return React.createElement(ProfileCamera, {\n    ref: function ref(camera) {\n      return cameraRef.current = camera;\n    },\n    type: Camera.Constants.Type.front,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: snap,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, React.createElement(InnerSnap, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  })));\n};","map":{"version":3,"sources":["/Users/mdabdurrahman/Desktop/Mobile App/MOBILE APPLICATION PROJECT/PROJECT/P/src/features/settings/screens/CameraScreen.js"],"names":["React","useContext","useRef","useState","useEffect","Camera","AsyncStorage","styled","CustomText","Text","AuthenticationContext","ProfileCamera","InnerSnap","View","CameraScreen","navigation","user","hasPermission","setHasPermission","cameraRef","snap","current","takePictureAsync","photo","setItem","uid","uri","goBack","requestPermissionsAsync","status","camera","Constants","Type","front"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,MAA5B,EAAoCC,QAApC,EAA8CC,SAA9C,QAA+D,OAA/D;;;AAEA,SAASC,MAAT,QAAuB,aAAvB;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,SAASC,UAAU,IAAIC,IAAvB;AACA,SAASC,qBAAT;AAEA,IAAMC,aAAa,GAAGJ,MAAM,CAACF,MAAD,CAAT,yHAAnB;AAMA,IAAMO,SAAS,GAAGL,MAAM,CAACM,IAAD,CAAT,gIAAf;AAMA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAC9C,oBAAiBd,UAAU,CAACS,qBAAD,CAA3B;AAAA,MAAQM,IAAR,eAAQA,IAAR;;AACA,kBAA0Cb,QAAQ,CAAC,IAAD,CAAlD;AAAA;AAAA,MAAOc,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,MAAMC,SAAS,GAAGjB,MAAM,EAAxB;;AAEA,MAAMkB,IAAI,GAAG,SAAPA,IAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACPD,SADO;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAEWA,SAAS,CAACE,OAAV,CAAkBC,gBAAlB,EAFX;;AAAA;AAEHC,YAAAA,KAFG;AAGTjB,YAAAA,YAAY,CAACkB,OAAb,CAAwBR,IAAI,CAACS,GAA7B,aAA0CF,KAAK,CAACG,GAAhD;AACAX,YAAAA,UAAU,CAACY,MAAX;;AAJS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAQAvB,EAAAA,SAAS,CAAC,YAAM;AACd,KAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAC0BC,MAAM,CAACuB,uBAAP,EAD1B;;AAAA;AAAA;AACSC,cAAAA,MADT,yBACSA,MADT;AAECX,cAAAA,gBAAgB,CAACW,MAAM,KAAK,SAAZ,CAAhB;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAID,GALQ,EAKN,EALM,CAAT;;AAOA,MAAIZ,aAAa,KAAK,IAAtB,EAA4B;AAC1B,WAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,MAAIA,aAAa,KAAK,KAAtB,EAA6B;AAC3B,WAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAP;AACD;;AAED,SACE,oBAAC,aAAD;AACE,IAAA,GAAG,EAAE,aAACa,MAAD;AAAA,aAAaX,SAAS,CAACE,OAAV,GAAoBS,MAAjC;AAAA,KADP;AAEE,IAAA,IAAI,EAAEzB,MAAM,CAAC0B,SAAP,CAAiBC,IAAjB,CAAsBC,KAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAEb,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CADF;AAUD,CArCM","sourcesContent":["import React, { useContext, useRef, useState, useEffect } from 'react';\nimport { View, TouchableOpacity } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport styled from 'styled-components/native';\n\nimport { CustomText as Text } from '../../../components/CustomText/CustomText';\nimport { AuthenticationContext } from '../../../services/authentication/AuthenticationContext';\n\nconst ProfileCamera = styled(Camera)`\n  width: 100%;\n  height: 100%;\n  flex: 1;\n`;\n\nconst InnerSnap = styled(View)`\n  width: 100%;\n  height: 100%;\n  z-index: 999;\n`;\n\nexport const CameraScreen = ({ navigation }) => {\n  const { user } = useContext(AuthenticationContext);\n  const [hasPermission, setHasPermission] = useState(null);\n  const cameraRef = useRef();\n\n  const snap = async () => {\n    if (cameraRef) {\n      const photo = await cameraRef.current.takePictureAsync();\n      AsyncStorage.setItem(`${user.uid}-photo`, photo.uri);\n      navigation.goBack();\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      const { status } = await Camera.requestPermissionsAsync();\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n\n  if (hasPermission === null) {\n    return <View />;\n  }\n  if (hasPermission === false) {\n    return <Text>No access to camera</Text>;\n  }\n\n  return (\n    <ProfileCamera\n      ref={(camera) => (cameraRef.current = camera)}\n      type={Camera.Constants.Type.front}\n    >\n      <TouchableOpacity onPress={snap}>\n        <InnerSnap />\n      </TouchableOpacity>\n    </ProfileCamera>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}