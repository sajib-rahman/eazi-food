{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mdabdurrahman/Desktop/Mobile App/MOBILE APPLICATION PROJECT/PROJECT/P/src/features/checkout/screens/CheckoutScreen.js\";\n\nimport React, { useContext, useState } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { List, Divider } from 'react-native-paper';\nimport { SafeArea } from \"../../../components/SafeArea/SafeArea\";\nimport { Spacer } from \"../../../components/Spacer/Spacer\";\nimport { CustomText as Text } from \"../../../components/CustomText/CustomText\";\nimport { CreditCardInput } from \"../components/CreditCardInput\";\nimport { CartIconContainer, CartIcon, PaymentProcessing, NameInput, PayButton, ClearButton } from \"../components/Checkout.styles\";\nimport { RestaurantInfoCard } from \"../../restaurants/components/RestaurantInfoCard\";\nimport { CartContext } from \"../../../services/cart/CartContext\";\nimport { payRequest } from \"../../../services/checkout/checkout.service\";\nexport var CheckoutScreen = function CheckoutScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(CartContext),\n      cart = _useContext.cart,\n      clearCart = _useContext.clearCart,\n      restaurant = _useContext.restaurant,\n      sum = _useContext.sum;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      card = _useState4[0],\n      setCard = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var onPay = function onPay() {\n    setIsLoading(true);\n\n    if (!card || !card.id) {\n      setIsLoading(false);\n      navigation.navigate('CheckoutError', {\n        error: 'Please fill in a valid credit card'\n      });\n      return;\n    }\n\n    payRequest(card.id, sum, name).then(function () {\n      setIsLoading(false);\n      clearCart();\n      navigation.navigate('CheckoutSuccess');\n    }).catch(function (err) {\n      setIsLoading(false);\n      navigation.navigate('CheckoutError', {\n        error: err\n      });\n    });\n  };\n\n  if (!cart.length || !restaurant) {\n    return React.createElement(SafeArea, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, React.createElement(CartIconContainer, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, React.createElement(CartIcon, {\n      icon: \"cart-off\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }), React.createElement(Text, {\n      variant: \"body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, \"Your cart is empty!\")));\n  }\n\n  return React.createElement(SafeArea, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, React.createElement(RestaurantInfoCard, {\n    restaurant: restaurant,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), isLoading && React.createElement(PaymentProcessing, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }), React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, React.createElement(Spacer, {\n    position: \"left\",\n    size: \"medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, React.createElement(Spacer, {\n    position: \"top\",\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    variant: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"Your Order\")), React.createElement(List.Section, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, cart.map(function (_ref2, i) {\n    var item = _ref2.item,\n        price = _ref2.price;\n    return React.createElement(List.Item, {\n      key: \"item-\" + i,\n      title: item + \" - \" + price / 100,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    });\n  })), React.createElement(Text, {\n    variant: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Total: \", sum / 100)), React.createElement(Spacer, {\n    position: \"top\",\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), React.createElement(NameInput, {\n    label: \"Name\",\n    value: name,\n    onChangeText: function onChangeText(nameText) {\n      return setName(nameText);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), React.createElement(Spacer, {\n    position: \"top\",\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, name.length > 0 && React.createElement(CreditCardInput, {\n    name: name,\n    onSuccess: setCard,\n    onError: function onError() {\n      return navigation.navigate('CheckoutError', {\n        error: 'Something went wrong processing your credit card'\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  })), React.createElement(Spacer, {\n    position: \"top\",\n    size: \"xxl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }), React.createElement(PayButton, {\n    mode: \"contained\",\n    icon: \"cash-usd\",\n    onPress: onPay,\n    disabled: isLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Pay\"), React.createElement(Spacer, {\n    position: \"top\",\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, React.createElement(ClearButton, {\n    mode: \"contained\",\n    icon: \"cart-off\",\n    onPress: clearCart,\n    disabled: isLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"Clear Cart\"))));\n};","map":{"version":3,"sources":["/Users/mdabdurrahman/Desktop/Mobile App/MOBILE APPLICATION PROJECT/PROJECT/P/src/features/checkout/screens/CheckoutScreen.js"],"names":["React","useContext","useState","List","Divider","SafeArea","Spacer","CustomText","Text","CreditCardInput","CartIconContainer","CartIcon","PaymentProcessing","NameInput","PayButton","ClearButton","RestaurantInfoCard","CartContext","payRequest","CheckoutScreen","navigation","cart","clearCart","restaurant","sum","name","setName","card","setCard","isLoading","setIsLoading","onPay","id","navigate","error","then","catch","err","length","map","i","item","price","nameText"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;;AAEA,SAASC,IAAT,EAAeC,OAAf,QAA8B,oBAA9B;AAEA,SAASC,QAAT;AACA,SAASC,MAAT;AACA,SAASC,UAAU,IAAIC,IAAvB;AACA,SAASC,eAAT;AACA,SACEC,iBADF,EAEEC,QAFF,EAGEC,iBAHF,EAIEC,SAJF,EAKEC,SALF,EAMEC,WANF;AASA,SAASC,kBAAT;AAEA,SAASC,WAAT;AACA,SAASC,UAAT;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAChD,oBAA6CnB,UAAU,CAACgB,WAAD,CAAvD;AAAA,MAAQI,IAAR,eAAQA,IAAR;AAAA,MAAcC,SAAd,eAAcA,SAAd;AAAA,MAAyBC,UAAzB,eAAyBA,UAAzB;AAAA,MAAqCC,GAArC,eAAqCA,GAArC;;AACA,kBAAwBtB,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAOuB,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAwBxB,QAAQ,CAAC,IAAD,CAAhC;AAAA;AAAA,MAAOyB,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAkC1B,QAAQ,CAAC,KAAD,CAA1C;AAAA;AAAA,MAAO2B,SAAP;AAAA,MAAkBC,YAAlB;;AAEA,MAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClBD,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,QAAI,CAACH,IAAD,IAAS,CAACA,IAAI,CAACK,EAAnB,EAAuB;AACrBF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAV,MAAAA,UAAU,CAACa,QAAX,CAAoB,eAApB,EAAqC;AACnCC,QAAAA,KAAK,EAAE;AAD4B,OAArC;AAGA;AACD;;AACDhB,IAAAA,UAAU,CAACS,IAAI,CAACK,EAAN,EAAUR,GAAV,EAAeC,IAAf,CAAV,CACGU,IADH,CACQ,YAAM;AACVL,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAR,MAAAA,SAAS;AACTF,MAAAA,UAAU,CAACa,QAAX,CAAoB,iBAApB;AACD,KALH,EAMGG,KANH,CAMS,UAACC,GAAD,EAAS;AACdP,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAV,MAAAA,UAAU,CAACa,QAAX,CAAoB,eAApB,EAAqC;AACnCC,QAAAA,KAAK,EAAEG;AAD4B,OAArC;AAGD,KAXH;AAYD,GArBD;;AAuBA,MAAI,CAAChB,IAAI,CAACiB,MAAN,IAAgB,CAACf,UAArB,EAAiC;AAC/B,WACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,IAAD;AAAM,MAAA,OAAO,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFF,CADF,CADF;AAQD;;AAED,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,kBAAD;AAAoB,IAAA,UAAU,EAAEA,UAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGM,SAAS,IAAI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFhB,EAGE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,MAAjB;AAAwB,IAAA,IAAI,EAAC,QAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,KAAjB;AAAuB,IAAA,IAAI,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,EAIE,oBAAC,IAAD,CAAM,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,IAAI,CAACkB,GAAL,CAAS,iBAAkBC,CAAlB,EAAwB;AAAA,QAArBC,IAAqB,SAArBA,IAAqB;AAAA,QAAfC,KAAe,SAAfA,KAAe;AAChC,WACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,GAAG,YAAUF,CADf;AAEE,MAAA,KAAK,EAAKC,IAAL,WAAeC,KAAK,GAAG,GAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAMD,GAPA,CADH,CAJF,EAcE,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA6BlB,GAAG,GAAG,GAAnC,CAdF,CADF,EAiBE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,KAAjB;AAAuB,IAAA,IAAI,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,EAkBE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,EAmBE,oBAAC,SAAD;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,KAAK,EAAEC,IAFT;AAGE,IAAA,YAAY,EAAE,sBAACkB,QAAD;AAAA,aAAcjB,OAAO,CAACiB,QAAD,CAArB;AAAA,KAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,EAwBE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,KAAjB;AAAuB,IAAA,IAAI,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlB,IAAI,CAACa,MAAL,GAAc,CAAd,IACC,oBAAC,eAAD;AACE,IAAA,IAAI,EAAEb,IADR;AAEE,IAAA,SAAS,EAAEG,OAFb;AAGE,IAAA,OAAO,EAAE;AAAA,aACPR,UAAU,CAACa,QAAX,CAAoB,eAApB,EAAqC;AACnCC,QAAAA,KAAK,EAAE;AAD4B,OAArC,CADO;AAAA,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAxBF,EAqCE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,KAAjB;AAAuB,IAAA,IAAI,EAAC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArCF,EAsCE,oBAAC,SAAD;AACE,IAAA,IAAI,EAAC,WADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,OAAO,EAAEH,KAHX;AAIE,IAAA,QAAQ,EAAEF,SAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAtCF,EA8CE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,KAAjB;AAAuB,IAAA,IAAI,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD;AACE,IAAA,IAAI,EAAC,WADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,OAAO,EAAEP,SAHX;AAIE,IAAA,QAAQ,EAAEO,SAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CA9CF,CAHF,CADF;AA+DD,CAvGM","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { ScrollView } from 'react-native';\nimport { List, Divider } from 'react-native-paper';\n\nimport { SafeArea } from '../../../components/SafeArea/SafeArea';\nimport { Spacer } from '../../../components/Spacer/Spacer';\nimport { CustomText as Text } from '../../../components/CustomText/CustomText';\nimport { CreditCardInput } from '../components/CreditCardInput';\nimport {\n  CartIconContainer,\n  CartIcon,\n  PaymentProcessing,\n  NameInput,\n  PayButton,\n  ClearButton,\n} from '../components/Checkout.styles';\n\nimport { RestaurantInfoCard } from '../../restaurants/components/RestaurantInfoCard';\n\nimport { CartContext } from '../../../services/cart/CartContext';\nimport { payRequest } from '../../../services/checkout/checkout.service';\n\nexport const CheckoutScreen = ({ navigation }) => {\n  const { cart, clearCart, restaurant, sum } = useContext(CartContext);\n  const [name, setName] = useState('');\n  const [card, setCard] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const onPay = () => {\n    setIsLoading(true);\n    if (!card || !card.id) {\n      setIsLoading(false);\n      navigation.navigate('CheckoutError', {\n        error: 'Please fill in a valid credit card',\n      });\n      return;\n    }\n    payRequest(card.id, sum, name)\n      .then(() => {\n        setIsLoading(false);\n        clearCart();\n        navigation.navigate('CheckoutSuccess');\n      })\n      .catch((err) => {\n        setIsLoading(false);\n        navigation.navigate('CheckoutError', {\n          error: err,\n        });\n      });\n  };\n\n  if (!cart.length || !restaurant) {\n    return (\n      <SafeArea>\n        <CartIconContainer>\n          <CartIcon icon=\"cart-off\" />\n          <Text variant=\"body\">Your cart is empty!</Text>\n        </CartIconContainer>\n      </SafeArea>\n    );\n  }\n\n  return (\n    <SafeArea>\n      <RestaurantInfoCard restaurant={restaurant} />\n      {isLoading && <PaymentProcessing />}\n      <ScrollView>\n        <Spacer position=\"left\" size=\"medium\">\n          <Spacer position=\"top\" size=\"large\">\n            <Text variant=\"body\">Your Order</Text>\n          </Spacer>\n          <List.Section>\n            {cart.map(({ item, price }, i) => {\n              return (\n                <List.Item\n                  key={`item-${i}`}\n                  title={`${item} - ${price / 100}`}\n                />\n              );\n            })}\n          </List.Section>\n          <Text variant=\"body\">Total: {sum / 100}</Text>\n        </Spacer>\n        <Spacer position=\"top\" size=\"large\" />\n        <Divider />\n        <NameInput\n          label=\"Name\"\n          value={name}\n          onChangeText={(nameText) => setName(nameText)}\n        />\n        <Spacer position=\"top\" size=\"large\">\n          {name.length > 0 && (\n            <CreditCardInput\n              name={name}\n              onSuccess={setCard}\n              onError={() =>\n                navigation.navigate('CheckoutError', {\n                  error: 'Something went wrong processing your credit card',\n                })\n              }\n            />\n          )}\n        </Spacer>\n        <Spacer position=\"top\" size=\"xxl\" />\n        <PayButton\n          mode=\"contained\"\n          icon=\"cash-usd\"\n          onPress={onPay}\n          disabled={isLoading}\n        >\n          Pay\n        </PayButton>\n        <Spacer position=\"top\" size=\"large\">\n          <ClearButton\n            mode=\"contained\"\n            icon=\"cart-off\"\n            onPress={clearCart}\n            disabled={isLoading}\n          >\n            Clear Cart\n          </ClearButton>\n        </Spacer>\n      </ScrollView>\n    </SafeArea>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}